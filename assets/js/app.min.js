/**
 * Anton Seroshtan
 * pure-js-dropdown v0.0.1
 */
!function(t){var n={click:"click",hover:"hover"},e={contract:"list.contracted",expand:"list.expanded",clicked:"item.clicked"},i={toggleType:n.click,controlClass:"jsdropdown",expandClass:"expanded",selectors:{caption:".jsdropdown__caption",list:".jsdropdown__list",items:".jsdropdown__item"}},o=function(t,n){t&&"string"==typeof t&&(this._controls={caption:null,list:null,items:null},this._config=s.extend({},i,n),this._callbacks={},this._callbacks[e.contract]=[],this._callbacks[e.expand]=[],this._callbacks[e.clicked]=[],this._selector=t,this._holder=null,this._listDisplayStyle=null,this._init())};o.prototype={on:function(t,n){this._callbacks[t]||(this._callbacks[t]=[]),s.addCallbackTo(this,this._callbacks[t],n)},toggle:function(){var t=null===this._listDisplayStyle?!0:!1;return t?this.contract():this.expand()},contract:function(){return"none"===this._controls.list.style.display?this:(this._listDisplayStyle=this._controls.list.style.display,this._controls.list.style.display="none",this._holder.classList.remove(this._config.expandClass),s.raiseCallbacks(this._callbacks[e.contract]),this)},expand:function(){return this._controls.list.style.display=this._listDisplayStyle||"",this._holder.classList.add(this._config.expandClass),this._listDisplayStyle=null,s.raiseCallbacks(this._callbacks[e.expand]),this},_init:function(){this._initHolder(),this._createControls(),this.contract(),this._attachEvents()},_initHolder:function(){var t=document.querySelector(this._selector);if(null!==t){var n=this._config.controlClass;s.hasClass(t,n)||t.classList.add(n),this._holder=t}},_createControls:function(){var t=this._config.selectors,n=this._controls,e=this._holder;n.caption=e.querySelector(t.caption),n.list=e.querySelector(t.list),n.items=e.querySelectorAll(t.items)},_attachEvents:function(){this._attachToogleEvents(),this._attachItemClickEvent()},_attachItemClickEvent:function(){var t=this._config.selectors,n=s.bind(this._onItemClick,this),e=s.bind(this._matchSelectorFilter,this,t.items,n);s.addEvent(this._controls.list,"click",e)},_attachToogleEvents:function(){var t=this._config.toggleType;t===n.click?this._attachCaptionClickEvent():t===n.hover&&this._attachCaptionHoverEvent()},_attachCaptionClickEvent:function(){var t=this._config.selectors,n=s.bind(this._onCaptionClick,this),e=s.bind(this._matchSelectorFilter,this,t.caption,n);s.addEvent(this._controls.caption,"click",e),n=s.bind(this._onBodyClick,this),e=s.bind(this._notContainElementFilter,this,this._selector,n),s.addEvent(document.body,"click",e)},_attachCaptionHoverEvent:function(){var t=this._config.selectors,n=s.bind(this._onCaptionHover,this),e=(s.bind(this._matchSelectorFilter,this,t.caption,n),this);s.addEvent(this._controls.caption,"mouseover",function(t){t.stopPropagation(),e.expand()}),s.addEvent(this._holder,"mouseout",function(t){t.stopPropagation();var n=s.closest(t.relatedTarget,e._selector);n||e.contract()})},_notContainElementFilter:function(t,n,e){var i=s.getTargetByEvent(e),o=s.closest(i,t);null===o&&n(e)},_matchHoverFilter:function(t,n,e){var i=s.getTargetByEvent(e),o=s.contain(i,t);o&&n(e)},_matchSelectorFilter:function(t,n,e){var i=s.getTargetByEvent(e),o=s.closest(i,t);o&&n(e)},_onItemClick:function(t){t.stopPropagation();var n=s.getTargetByEvent(t),i=s.matches(n,"[disabled]");i!==!0&&(s.raiseCallbacks(this._callbacks[e.clicked],[t]),this.contract())},_onBodyClick:function(){this.contract()},_onCaptionClick:function(t){t.stopPropagation(),this.toggle()}};var s={};s.hasClass=function(t,n){var e=t.classList,i=Array.prototype.indexOf.call(e,n);return-1===i?!1:!0},s.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},s.extend=function(t){if(!s.isObject(t))return t;var n,e,i,o=arguments.length;for(i=1;o>i;i++){n=arguments[i];for(e in n)hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},s.bind=function(t,n){function e(){var e=Array.prototype.slice.call(arguments),o=i.concat(e);return t.apply(n,o)}var i=Array.prototype.slice.call(arguments,2);return e},s.addCallbackTo=function(t,n,e){return null!=e&&"function"==typeof e&&n.push(e),null==n.owner&&(n.owner=t),null==n.maxIndex&&(n.maxIndex=1),null!=e&&(e.callbackIndex=n.maxIndex++),t},s.raiseCallbacks=function(t,n){null==n&&(n=[]);for(var e=0;e<t.length;e++)t[e].apply(t.owner,n)},s.getTargetByEvent=function(t){var t=event||window.event;return t.target||t.srcElement},s.closest=function(t,n){for(var e=function(t){return 1===t.nodeType?s.matches(t,n):!1};t;){if(e(t))return t;t=t.parentNode}return null},s.contain=function(t,n){for(var e=function(t){return 1===t.nodeType?s.matches(t,n):!1};t;){if(e(t))return t;t=t.parentNode}return null},s.matches=function(){var t;return function(n,e){return t||(t=n.matches?function(t,n){return t.matches(n)}:el.matchesSelector?function(t,n){return t.matchesSelector(n)}:function(t,n){for(var e=t.parentNode.querySelectorAll(n),i=e.length,o=0;i>o;o++)if(e[o]===elem)return!0;return!1}),t(n,e)}}(),s.addEvent=function(){var t;return function(n,e,i){t||(t=n.addEventListener?function(t,n,e){t.addEventListener(n,e,!1)}:n.attachEvent?function(t,n,e){t.attachEvent("on"+n,e)}:function(t,n,e){t["on"+n]=e}),t(n,e,i)}}(),t.Dropdown=o}(window.dropdown||(window.dropdown={}));
!function(n){function t(){return e||(e=new i),t=function(){return e},o}var o={instance:t},e=null,r=n,i=function(){this._controls={menu:{first:null,second:null,third:null},firstMenuState:null},this._init()};i.prototype={_init:function(){this._createControls(),this._attachEvents()},_createControls:function(){if(r.Dropdown&&"function"==typeof r.Dropdown){var n=this._controls,t=n.menu;t.first=new r.Dropdown(".jsdropdown-click"),t.second=new r.Dropdown(".jsdropdown-hover",{toggleType:"hover"}),t.third=new r.Dropdown(".jsdropdown-simple",{selectors:{caption:"div",list:"ul",items:"li"}}),n.firstMenuState=document.querySelector(".jsdropdown__example_state")}},_attachEvents:function(){function n(n,t){return Math.floor(Math.random()*(t-n))+n}var t=this._controls,o=t.menu,e=["red","blue","green","yellow"];o.first.on("list.contracted",function(){t.firstMenuState.innerHTML="contracted"}),o.first.on("list.expanded",function(){t.firstMenuState.innerHTML="expanded"}),o.first.on("item.clicked",function(){alert("First menu item clicked")}),o.second.on("item.clicked",function(){var t=n(0,3),o=document.querySelector(".jsdropdown__example_section-hover .jsdropdown__example_text");o.style.backgroundColor=e[t],o.style.color="white"})}},r.ExampleApp=o}(window.dropdown||(window.dropdown={}));
!function(n){function t(){e||(e=!0,n.app=n.ExampleApp.instance())}function d(){document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):window.attachEvent&&window.attachEvent("onload",t),"complete"===document.readyState&&t()}var e=!1;d()}(window.dropdown||(window.dropdown={}));